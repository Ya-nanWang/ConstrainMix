% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{generate_balanced_lists}
\alias{generate_balanced_lists}
\title{Generate Lists with Block-Internal Constraints and Cross-Version Balance}
\usage{
generate_balanced_lists(
  data,
  constraints,
  n_lists = 1,
  item_col,
  balance_cols,
  n_blocks = 2,
  block_col_name = "Block",
  max_steps = 5000,
  show_feedback = TRUE,
  strict_mode = TRUE,
  track_occurrences = TRUE,
  track_by = NULL,
  occurrence_count_name = "Occurrence",
  save_to = NULL
)
}
\arguments{
\item{data}{Data frame}

\item{constraints}{List of constraints}

\item{n_lists}{Number of lists to generate}

\item{item_col}{Item identifier column (e.g., "Picture", "Word"),
used for Latin square grouping to determine which rows belong to the same item}

\item{balance_cols}{Factor columns for block balancing. Supports single or multiple columns:
\itemize{
\item Single column: balance_cols = "Condition"
\item Multiple columns: balance_cols = c("Factor1", "Factor2")
When multiple columns are specified, a combination column is automatically created for balancing
}}

\item{n_blocks}{Number of blocks (default 2). If n_blocks = 1, skip Latin square.}

\item{block_col_name}{Name for Block column}

\item{max_steps}{Max optimization steps per block}

\item{show_feedback}{Show progress}

\item{strict_mode}{If TRUE, reject lists with hard constraint violations}

\item{track_occurrences}{Add occurrence count}

\item{track_by}{Column for tracking occurrences (defaults to item_col,
but can specify another column separately)}

\item{occurrence_count_name}{Name for occurrence column}

\item{save_to}{Directory to save CSV files (NULL = don't save)}
}
\value{
Results list
}
\description{
Integrated function: Implements block-internal constraints + cross-version
block assignment balance. This is the most complete solution, suitable for
experimental designs requiring breaks between blocks.
}
\details{
This function implements triple balancing (when n_blocks >= 2):
\enumerate{
\item \strong{Block-internal constraints}: Each block independently satisfies all constraint rules
\item \strong{Block-internal condition balance}: Uses Latin square to ensure equal numbers of each condition within each block
\item \strong{Cross-version balance}: Different versions use different block assignment patterns, ensuring between-subject balance
}

When n_blocks = 1, Latin square logic is skipped and global constraint optimization is used directly.
}
